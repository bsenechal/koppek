
<section data-ng-controller="MyAccountController" layout="row" layout-sm="column">
    <div flex-md="40" flex-gt-sm="20">
        <md-content class="md-padding"> <md-card>
        <md-card-content>
        <form editable-form name="editableForm" onaftersave="editUser()">
			<center>
			<img ng-src="https://koppekimages.s3-eu-west-1.amazonaws.com/users/{{authentication.user.avatar}}" width = "90%" height="90%" class="img-circle" />
				
                <md-button class="md-primary"
                    aria-label="Modifier l'avatar"
                    ng-click="imageForm.$show()"
                    ng-show="!imageForm.$visible">Modifier
                l'avatar</md-button>
            </center>
				<h2 ng-show="!editableForm.$visible">
					{{authentication.user.firstName}} {{authentication.user.lastName}}</h2>
				<div ng-show="editableForm.$visible">
					<h5>
						<b>Nom</b>
					</h5>
					<span editable-text="authentication.user.firstName"
						e-name="authentication.user.firstName" e-required>
						{{authentication.user.firstName}} </span>
					<h5>
						<b>Prénom</b>
					</h5>
					<span editable-text="authentication.user.lastName"
						e-name="authentication.user.lastName" e-required>{{authentication.user.lastName}}</span>
				</div>
				<h5 ng-show="editableForm.$visible">
					<b>Email</b>
				</h5>
				<span editable-text="authentication.user.email"
					e-name="authentication.user.email" e-required>{{authentication.user.email}}</span>


				<md-list>
				<h4>Rôles</h4>
				<md-list-item class="md-3-line"
					ng-repeat="item in authentication.user.roles">
				<p>{{ item}}</p>
				</md-list-item> </md-list>
            <div class="buttons">
                <!-- buttons to submit / cancel form -->
                <span ng-show="editableForm.$visible"> <br /> <md-button
                        class="md-primary md-raised"
                        aria-label="Sauvegarder"
                        ng-disabled="editableForm.$waiting">Sauvegarder</md-button>
                    <md-button class="md-default md-raised"
                        aria-label="Annuler"
                        ng-disabled="editableForm.$waiting"
                        ng-click="editableForm.$cancel()">Annuler
                    </button></span>
            </div>
        </form>
        </md-card-content>
        <div class="md-actions" layout="row" layout-align="end center">
            <md-button class="md-primary md-raised" aria-label="Editer"
                ng-click="editableForm.$show()"
                ng-show="!editableForm.$visible">Editer</md-button>
        </div>

        </md-card> </md-content>
    </div>

    <div flex-md="60" flex-gt-sm="80">
        <md-content class="md-padding"> <md-card>
        <md-card-content>
        <div ng-show="!imageForm.$visible">
            <h2>Mon activité</h2>
        </div>
        <md-list>
            <md-list-item><md-button class="md-fab md-mini" aria-label="Nombre de deals">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            </md-button><h4> <strong>{{nbOfDeal}} </strong> deals</h4></md-list-item>
            <md-list-item>
            <md-button class="md-fab md-mini" aria-label="Nombre de commentaires">
                <span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
            </md-button><h4><strong>{{nbOfComment}} </strong> commentaires</h4></md-list-item>
        </md-list>

        <div ng-show="imageForm.$visible">
            <h2>Modification de l'avatar</h2>
            <md-toolbar class="md-theme-light">
            <h2 class="md-toolbar-tools">
                <span>Etape 1 : Selection d'une image</span>
            </h2>
            </md-toolbar>
            <form editable-form name="imageForm"
                onaftersave="editAvatar()">
                <md-content> <label>Selectionnez
                    une image </label> <md-input-container>
                <input aria-label="Selectionnez une image" name="file" type="file" id="fileInput" /> </md-input-container> </md-content>
                <div ng-show="myImage">
                    <md-toolbar class="md-theme-light">
                    <h2 class="md-toolbar-tools">
                        <span>Etape 2 : Redimensionnement</span>
                    </h2>
                    </md-toolbar>

                    <div class="cropArea" width="200em" height="200em">
                        <img-crop image="myImage"
                            result-image="myCroppedImage"></img-crop>
                    </div>
                    <h4>Aperçu</h4>
                    <div>
                        <img ng-src="{{myCroppedImage}}"
                            class="img-circle" />
                    </div>
            </form>

            <md-button class="md-primary md-raised"
                aria-label="Enregistrer">Enregistrer</md-button>
        </div>
    </div>

    </md-card-content>


    </md-card>
    </md-content>
    </div>

</section>
