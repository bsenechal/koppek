
<div class="comments-container">
	<div class="load-more-comment" ng-if="loadcomment">
	<i class="glyphicon glyphicon-comment"></i>
		<a data-ng-if="commentEditable" data-ng-click="findComments(parent,false);">View more comments</a>
	</div>
	<div data-ng-repeat="comment in parent.comments | orderBy: '+created' " class="comment-items" >
		<div class="comment">
<!-- 			<div class="post-image">
				<img ng-src ="{{comment.user.picture}}">
			</div> -->
			<div>
 				<span class="comment-author"><a href="#!/users/{{comment.user._id}}">{{comment.user.name}}</a></span>
				<span class="comment-time-ago" time-ago from-time="{{comment.created}}"></span>
				<div class="comment-body-container">
					<span data-ng-if="!comment.editable" class="comment-body" ng-bind-html="comment.body | newlines | parseUrlFilter:'_self' ">{{comment.body}}</span>
					<div data-ng-if="comment.editable" data-ng-show="authentication.user._id == comment.user._id">
						<form class="form-horizontal center-block comment-{{parent._id}}"  data-ng-submit="update(comment)">
							<p class="input-group">
								<span ng-class="class">
									<textarea name="comment" msd-elastic="\n" cols="30" rows="1" data-ng-model="comment.body" class="form-control" required></textarea>
								</span>
								<input type="submit" class="btn-comment-edit" value="Done Editing"/>
							</p>
						</form>
					</div>
					<span class="comment-remove" data-ng-show="authentication.user._id == comment.user._id">
						<a class="comment-button" data-ng-click="remove(comment);">
							<i class="glyphicon glyphicon-trash"></i>
						</a>
						<a class="comment-button" data-ng-if="commentEditable" data-ng-click="editComment(comment);">
							<i class="glyphicon glyphicon-pencil"></i>
						</a>
					</span>
               <a class="btn" data-ng-click="::updateCommentGradePlus(comment);">
                  <i class="glyphicon glyphicon-plus"></i>
               </a>
               {{comment.grade}}
               <a class="btn" data-ng-click="::updateCommentGradeMinus(comment);">
                  <i class="glyphicon glyphicon-minus"></i>
               </a>
					<a class="btn" data-ng-click="updateAlert(comment);">
						<i class="glyphicon glyphicon-exclamation-sign"></i>
					</a>
					<!--{{comment.alert}}-->
          <!-- 					<span ng-include="'likes/views/like-button.html'" data-ng-controller="LikesController" data-ng-init="findLikes('comment', comment)" /> -->
        </div>
      </div>
    </div>
  </div>

</div>

<div class ="comments-container comment-form">
  <form id="comment-{{parent._id}}" class="form-horizontal center-block comment-{{parent._id}}"  data-ng-submit="create(body, parent,taggedUsers)">
    <div class="post-image">
      <img ng-src ="{{authentication.user.picture}}">
    </div>
    <p class="input-group">
      <span ng-class="class">
        <textarea name="comment" msd-elastic cols="30" id="comment-message" rows="1" placeholder="Write a comment..." data-ng-model="body" class="form-control" required mentio-for="'comment-message'" mentio-trigger-char="'@'" mentio-items="people" mentio-template-url="/people-mentions.tpl" mentio-search="searchPeople(term)" mentio-select="getCommentPeopleTextRaw(item)" mentio-typed-term="typedTerm2" mentio mentio-macros="macros"></textarea>
      </span>
      <input type="hidden" data-ng-model="comment" name="comment" value="{{comment._id}}"/>
      <span class="input-group-btn">
        <input type="submit" class="btn btn-default pull-right comment-{{parent._id}}" value="Comment"/>
      </span>
    </p>
  </form>
</div>
<script type="text/ng-template" id="/people-mentions.tpl">
  <ul class="list-group user-search">
    <li mentio-menu-item="person" ng-repeat="person in items" class="list-group-item">
      <span ng-bind-html="person.name | mentioHighlight:typedTerm:'menu-highlighted' | unsafe"></span>
    </li>
  </ul>
</script>
