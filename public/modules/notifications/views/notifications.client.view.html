<section layout-padding>
   <!-- tmp test notif -->
   <h1>Notifications</h1>
   <md-whiteframe class="md-whiteframe-z1">
   <div data-ng-controller="ContactListController" 
        data-ng-init="getContactList();">
   <md-autocomplete  md-search-text="searchText" md-items="contact in getMatches(searchText)"
      md-selected-item="selectedItem" 
      md-item-text="contact.display"
      md-autoselect='true'
      md-search-text-change="setSearchText();"
      md-floating-label="Chercher par contact (commencer à entrer 'notifications' pour voir seulement les notifications)">
     <span md-highlight-text="searchText">{{contact.display}}</span>
   </md-autocomplete>
</md-whiteframe>

   </div>
   <div 


      



      data-ng-controller="NotificationsController"
      data-ng-init="getNotification()" >

         <div class="md-12-line" layout="row"
         data-ng-repeat="notification in notifications | filter:filterByContact track by notification._id">
            <md-whiteframe class="md-whiteframe-z1" ng-if="notification.type == 'message' && notification.userTo._id == authentication.user._id" div flex="40" layout-padding layout="row">
<!--             <md-subheader class="md-no-sticky">3 line item</md-subheader>
 <md-whiteframe class="md-whiteframe-z1">-->         
                    <img flex="20" data-ng-src="{{notification.userFrom.avatar}}"
                    width="100%" height="100%" class="img-circle" />
                    <div layout="column" flex="80">
                     <h3>{{notification.content}}- 
                     {{notification.type}}</h3>
                     <p>envoyé par 
                     <strong>{{notification.userFrom.username}}</strong> le {{notification.created}}  <a class="btn" data-ng-click="removeNotification(notification._id);"> <i
                     class="glyphicon glyphicon-trash"></i>
                  </a></p>
<!--                <img data-ng-src="{{notification.userFrom.avatar}}"
                    width="200em" height="200em" class="img-circle" />
 -->                 
                  </div>
            </md-whiteframe>            
            <md-whiteframe class="md-whiteframe-z1"  ng-if="notification.type == 'message' && notification.userTo._id != authentication.user._id" div flex="40" offset="60" layout-padding layout="row">
            <div layout="column" flex="80">
               <h3>{{notification.content}}
               {{notification.type}}</h3>
               <p> envoyé par 
               <strong>{{notification.userTo.username}}</strong> le {{notification.created}} <a class="btn" data-ng-click="removeNotification(notification._id);"> <i
                     class="glyphicon glyphicon-trash"></i>
                  </a></p>
                                 
               </div>
                    <img flex="20" data-ng-src="{{notification.userFrom.avatar}}"
                    width="100%" height="100%" class="img-circle" />

            </md-whiteframe>            
            <md-whiteframe ng-if="notification.type == 'notification'" div flex offset="33">
               
               <h3><em>{{notification.created}}</em> - 
               {{notification.type}}</h3>
               <p>{{notification.content}} créé par le système</p>

                  <a class="btn" data-ng-click="removeNotification(notification._id);"> <i
                     class="glyphicon glyphicon-trash"></i>
                  </a>
            </md-whiteframe>
            <md-divider md-inset ng-if="!$last"></md-divider>
      </div> 
         <a class="btn" data-ng-click="removeAllNotification();"> <i
            class="glyphicon glyphicon-trash"> ERASE ALL</i>
         </a>
   <form name="messageForm" data-ng-submit="sendMessage();">
   <md-input-container>
     <label>Destinataire</label>
     <input type="text" ng-model="message.userToName">
   </md-input-container>
   <md-input-container>
     <input type="hidden" ng-model="message.userTo">
   </md-input-container>
   <md-input-container>
     <label>Contenu</label>
     <textarea ng-model="message.content"></textarea>
   </md-input-container>
   <md-input-container> <md-button
     class="md-primary" data-ng-click="submit();">Envoyer</md-button>
   </md-input-container>
   <form>
   </div>            
</section>